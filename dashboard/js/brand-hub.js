// CPL Brand Hub - Interactive JavaScript
// Embedded data for standalone operation - REBALANCED (no weekends, better partner distribution)

let activeMonth = 'december';
let activeFilter = 'all';

// Embedded dashboard data - CORRECTED PARTNERS (Andrew Luftig + Michael Rosenberg)
const dashboardData = {"meta":{"lastUpdated":"2025-11-23","currentDate":"2025-11-23","criticalDeadline":"2025-11-25","danaEndDate":"2025-12-05","danaNote":"Dana Frank (former marketing manager) ends Dec 5, 2025"},"channelWorkflow":{"partnerVideos":{"process":"1. Partner records 30-min Zoom call monthly\n2. Lexi edits to 3-4 clips (30-60s each)\n3. Partner posts to their LinkedIn profile\n4. CPL firm account reposts 24-48 hours later","whoManages":"Lexi (video editor), Partner (posting), Andrew/team (firm repost)"},"firmPosts":{"process":"Created by team, posted directly to CPL firm LinkedIn account","whoManages":"Andrew or designated team member"},"blogPosts":{"process":"Published on CPL website, sent via newsletter, shared as link on LinkedIn","whoManages":"Website admin + email platform + LinkedIn"}},"contentPillars":{"pillar1":"Broker Empowerment & Collaboration","pillar2":"Financial Expertise Integration","pillar3":"Responsive Partnership & Hands-On Service"},"decisions":[{"id":1,"title":"Brand Architecture Revisions","description":"Approve revised positioning: removed 'boutique', renamed 'Honest' to 'Straightforward', added broker empowerment","status":"pending","deadline":"2025-11-25","approver":["Andrew","Alan"],"budgetImpact":"$0","priority":"critical"},{"id":2,"title":"Google Search Console Investment","description":"GSC setup + technical SEO fixes to enable content measurement and optimization","status":"pending","deadline":"2025-11-25","approver":["Andrew","Alan"],"budgetImpact":"$1,000-$1,500","priority":"critical"},{"id":3,"title":"Video Production Plan (Lexi Partnership)","description":"Establish video editing workflow with Lexi: Partner records 30-min Zoom call monthly → Lexi edits into 3-4 LinkedIn clips (30-60 sec each) with captions, graphics, and LinkedIn optimization. Commit to production schedule and workflow.","status":"pending","deadline":"2025-11-25","approver":["Andrew","Alan"],"budgetImpact":"$0","priority":"critical","details":"Each partner: 1 recording/month = 3-4 posts. Total: ~12 video posts/month across all partners."},{"id":4,"title":"Q1 2026 Content Calendar","description":"Approve Dec-Feb publishing schedule (50+ posts total, weekdays only)","status":"pending","deadline":"2025-11-25","approver":["Andrew","Alan"],"budgetImpact":"$0","priority":"high"},{"id":5,"title":"Partner Content Strategy","description":"Approve individual partner participation plans and content themes","status":"pending","deadline":"2025-11-25","approver":["Andrew","Alex","Alan","Michael C","Michael R"],"budgetImpact":"$0","priority":"high"},{"id":6,"title":"Monthly Recording Commitment","description":"Each video-comfortable partner commits to 30-min Zoom recording per month. Michael Rosenberg provides written content instead.","status":"pending","deadline":"2025-11-25","approver":["Andrew","Alex","Alan","Michael C","Michael R"],"budgetImpact":"$0 (time commitment)","priority":"high"}],"calendar":{"december":[{"date":"2025-12-01","type":"firm-post","partner":"Dana","topic":"Meme: The Market Might Cool Off","platform":["LinkedIn","Instagram","TikTok","Facebook"],"status":"approved","format":"video","postingChannel":"Firm Profile (Andrew/CPL)","whoToPost":"Andrew or CPL team","pillar":null,"brief":"Dana's meme video about market conditions (Dana's final week)"},{"date":"2025-12-03","type":"firm-post","partner":"Dana","topic":"Why Co-ops Don't Allow Interest-Only Loans","platform":["LinkedIn","Instagram","Facebook","TikTok"],"status":"approved","format":"text-video","postingChannel":"Firm Profile (Andrew/CPL)","whoToPost":"Andrew or CPL team","pillar":null,"brief":"Educational content about co-op financing requirements"},{"date":"2025-12-04","type":"firm-post","partner":"Dana","topic":"Keeping Transactions Professional","platform":["LinkedIn","Facebook","Instagram","TikTok"],"status":"approved","format":"video","postingChannel":"Firm Profile (Andrew/CPL)","whoToPost":"Andrew or CPL team","pillar":null,"brief":"Dana's perspective on professionalism in RE transactions"},{"date":"2025-12-05","type":"firm-post","partner":"Dana","topic":"Understanding 'On or About' & 'Escrow'","platform":["LinkedIn","Instagram","TikTok","Facebook"],"status":"approved","format":"text","postingChannel":"Firm Profile (Andrew/CPL)","whoToPost":"Andrew or CPL team","pillar":null,"brief":"NYC RE terminology explained (DANA'S LAST DAY)"},{"date":"2025-12-09","type":"video","partner":"Michael Carlos","topic":"Broker Empowerment in Action","platform":["LinkedIn"],"status":"pending-recording","duration":"45s","recordingDate":"2025-12-03","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Michael Carlos posts, then CPL reposts","pillar":"Broker Empowerment & Collaboration","brief":"Michael C shares how CPL empowers brokers to lead their deals"},{"date":"2025-12-10","type":"video","partner":"Andrew Luftig","topic":"Managing Partner's Vision for 2026","platform":["LinkedIn"],"status":"pending-recording","duration":"50s","recordingDate":"2025-12-03","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Andrew Luftig posts, then CPL reposts","pillar":"Responsive Partnership & Hands-On Service","brief":"Andrew shares CPL's strategic direction and commitment to broker partnerships for the coming year"},{"date":"2025-12-11","type":"blog","partner":"Michael Rosenberg","topic":"Commercial Banking Landscape: Year in Review","platform":["Blog","Newsletter"],"status":"pending-draft","format":"blog-post","postingChannel":"Website + Newsletter + LinkedIn Link","whoToPost":"Website admin + email + LinkedIn link post","pillar":"Financial Expertise Integration","brief":"Michael R's written analysis of 2025 commercial lending trends and what brokers should know going into 2026"},{"date":"2025-12-12","type":"firm-post","partner":null,"topic":"5 Transaction Pitfalls from 2025","platform":["LinkedIn"],"status":"scheduled","format":"carousel","postingChannel":"Firm Profile Only","whoToPost":"Andrew or CPL team","pillar":null,"brief":"Year-end recap of common transaction issues and how to avoid them"},{"date":"2025-12-16","type":"video","partner":"Alex Whiteaker","topic":"Navigating Year-End Urgency","platform":["LinkedIn"],"status":"pending-recording","duration":"40s","recordingDate":"2025-11-27","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Alex Whiteaker posts, then CPL reposts","pillar":"Responsive Partnership & Hands-On Service","brief":"Alex on managing year-end commercial deal timelines"},{"date":"2025-12-17","type":"video","partner":"Andrew Luftig","topic":"What Makes CPL Different: A Managing Partner's Perspective","platform":["LinkedIn"],"status":"pending-recording","duration":"55s","recordingDate":"2025-12-10","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Andrew Luftig posts, then CPL reposts","pillar":"Broker Empowerment & Collaboration","brief":"Andrew explains CPL's unique approach to empowering brokers and building long-term partnerships"},{"date":"2025-12-18","type":"video","partner":"Michael Carlos","topic":"Team Approach to Complex Deals","platform":["LinkedIn"],"status":"pending-recording","duration":"45s","recordingDate":"2025-12-03","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Michael Carlos posts, then CPL reposts","pillar":"Broker Empowerment & Collaboration","brief":"Michael C shares how CPL's collaborative approach benefits brokers and clients"},{"date":"2025-12-19","type":"blog","partner":"Alex Whiteaker","topic":"Orchestra Approach (Full Blog)","platform":["Blog","Newsletter"],"status":"pending-recording","format":"blog-post","postingChannel":"Website + Newsletter + LinkedIn Link","whoToPost":"Website admin + email + LinkedIn link post","pillar":"Broker Empowerment & Collaboration","brief":"Deep dive into CPL's collaborative approach to commercial RE"},{"date":"2025-12-22","type":"video","partner":"Alan Perlowitz","topic":"Year-End Tax Considerations","platform":["LinkedIn"],"status":"pending-recording","duration":"45s","recordingDate":"2025-12-03","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Alan Perlowitz posts, then CPL reposts","pillar":"Financial Expertise Integration","brief":"Alan's financial expertise on year-end real estate tax planning"},{"date":"2025-12-23","type":"firm-post","partner":null,"topic":"Happy Holidays from CPL","platform":["LinkedIn"],"status":"scheduled","format":"image","postingChannel":"Firm Profile Only","whoToPost":"Andrew or CPL team","pillar":null,"brief":"Holiday message from CPL team (last workday before Christmas)"},{"date":"2025-12-30","type":"blog","partner":"Michael Rosenberg","topic":"Strategic Banking Relationships in Commercial RE","platform":["Blog","Newsletter"],"status":"pending-draft","format":"blog-post","postingChannel":"Website + Newsletter + LinkedIn Link","whoToPost":"Website admin + email + LinkedIn link post","pillar":"Financial Expertise Integration","brief":"Michael R's written insights on how strong banking relationships benefit commercial real estate transactions"}],"january":[{"date":"2026-01-02","type":"firm-post","partner":null,"topic":"2026 Predictions: NYC RE Outlook","platform":["LinkedIn"],"status":"planned","format":"text","postingChannel":"Firm Profile Only","whoToPost":"Andrew or CPL team","pillar":null,"brief":"Firm's perspective on NYC real estate market for 2026"},{"date":"2026-01-06","type":"blog","partner":"Alan Perlowitz","topic":"Financial Expertise in Commercial RE","platform":["Blog","Newsletter"],"status":"planned","format":"blog-post","postingChannel":"Website + Newsletter + LinkedIn Link","whoToPost":"Website admin + email + LinkedIn link post","pillar":"Financial Expertise Integration","brief":"Alan's deep dive into how financial background enhances deal structuring"},{"date":"2026-01-07","type":"video","partner":"Michael Carlos","topic":"Q1 Commercial Market Preparation","platform":["LinkedIn"],"status":"planned","duration":"45s","recordingDate":"2026-01-06","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Michael Carlos posts, then CPL reposts","pillar":"Responsive Partnership & Hands-On Service","brief":"Michael C advises brokers on preparing for Q1 commercial activity"},{"date":"2026-01-08","type":"firm-post","partner":null,"topic":"New NYC Mayor Impact on RE 2026","platform":["LinkedIn"],"status":"planned","format":"text","postingChannel":"Firm Profile Only","whoToPost":"Andrew or CPL team","pillar":null,"brief":"Analysis of potential policy impacts on NYC real estate"},{"date":"2026-01-09","type":"video","partner":"Andrew Luftig","topic":"Building Broker Trust: CPL's Long-Term Approach","platform":["LinkedIn"],"status":"planned","duration":"50s","recordingDate":"2026-01-06","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Andrew Luftig posts, then CPL reposts","pillar":"Broker Empowerment & Collaboration","brief":"Andrew discusses how CPL invests in long-term broker relationships rather than transactional interactions"},{"date":"2026-01-13","type":"video","partner":"Alex Whiteaker","topic":"Orchestra Approach in Action","platform":["LinkedIn"],"status":"planned","duration":"50s","recordingDate":"2026-01-06","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Alex Whiteaker posts, then CPL reposts","pillar":"Broker Empowerment & Collaboration","brief":"Real deal story showing collaborative team approach"},{"date":"2026-01-14","type":"video","partner":"Andrew Luftig","topic":"Partner Accessibility: How We Stay Responsive","platform":["LinkedIn"],"status":"planned","duration":"45s","recordingDate":"2026-01-13","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Andrew Luftig posts, then CPL reposts","pillar":"Responsive Partnership & Hands-On Service","brief":"Andrew shares how CPL partners remain directly accessible to brokers throughout transactions"},{"date":"2026-01-15","type":"firm-post","partner":null,"topic":"Goal Setting for NYC Brokers 2026","platform":["LinkedIn"],"status":"planned","format":"carousel","postingChannel":"Firm Profile Only","whoToPost":"Andrew or CPL team","pillar":null,"brief":"Tips for brokers setting their 2026 business objectives"},{"date":"2026-01-16","type":"blog","partner":"Michael Rosenberg","topic":"Navigating Commercial Lending in 2026","platform":["Blog","Newsletter"],"status":"planned","format":"blog-post","postingChannel":"Website + Newsletter + LinkedIn Link","whoToPost":"Website admin + email + LinkedIn link post","pillar":"Financial Expertise Integration","brief":"Michael R's written guide to commercial lending landscape changes and what brokers should anticipate"},{"date":"2026-01-20","type":"video","partner":"Alan Perlowitz","topic":"Most Memorable Deal of 2025","platform":["LinkedIn"],"status":"planned","duration":"55s","recordingDate":"2026-01-13","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Alan Perlowitz posts, then CPL reposts","pillar":"Financial Expertise Integration","brief":"Alan shares year-in-review deal story highlighting financial expertise"},{"date":"2026-01-21","type":"video","partner":"Alex Whiteaker","topic":"Financial Expertise Saves the Day","platform":["LinkedIn"],"status":"planned","duration":"50s","recordingDate":"2026-01-20","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Alex Whiteaker posts, then CPL reposts","pillar":"Financial Expertise Integration","brief":"Deal story where Alan's financial background solved a critical issue"},{"date":"2026-01-22","type":"video","partner":"Michael Carlos","topic":"Responsive Partnership Example","platform":["LinkedIn"],"status":"planned","duration":"45s","recordingDate":"2026-01-20","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Michael Carlos posts, then CPL reposts","pillar":"Responsive Partnership & Hands-On Service","brief":"Michael C shares broker emergency response story"},{"date":"2026-01-23","type":"video","partner":"Andrew Luftig","topic":"What Brokers Tell Us They Value Most","platform":["LinkedIn"],"status":"planned","duration":"50s","recordingDate":"2026-01-20","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Andrew Luftig posts, then CPL reposts","pillar":"Broker Empowerment & Collaboration","brief":"Andrew shares direct feedback from broker partners on what makes CPL their preferred real estate attorney"}],"february":[{"date":"2026-02-03","type":"video","partner":"Andrew Luftig","topic":"Spring Market Preparation: A Leadership Perspective","platform":["LinkedIn"],"status":"planned","duration":"50s","recordingDate":"2026-01-27","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Andrew Luftig posts, then CPL reposts","pillar":"Responsive Partnership & Hands-On Service","brief":"Andrew provides strategic guidance for brokers preparing for spring market activity"},{"date":"2026-02-04","type":"blog","partner":"Michael Rosenberg","topic":"Commercial Financing Best Practices for Brokers","platform":["Blog","Newsletter"],"status":"planned","format":"blog-post","postingChannel":"Website + Newsletter + LinkedIn Link","whoToPost":"Website admin + email + LinkedIn link post","pillar":"Financial Expertise Integration","brief":"Michael R's written practical guide to helping brokers understand commercial lending requirements and prepare clients effectively"},{"date":"2026-02-05","type":"firm-post","partner":null,"topic":"Black History Month: Diversity in NYC RE","platform":["LinkedIn"],"status":"planned","format":"text","postingChannel":"Firm Profile Only","whoToPost":"Andrew or CPL team","pillar":null,"brief":"CPL's commitment to diversity and inclusion in real estate"},{"date":"2026-02-10","type":"video","partner":"Alex Whiteaker","topic":"Complex Deal from Challenging Circumstances","platform":["LinkedIn"],"status":"planned","duration":"55s","recordingDate":"2026-02-03","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Alex Whiteaker posts, then CPL reposts","pillar":"Broker Empowerment & Collaboration","brief":"Alex shares how collaboration turned around a difficult transaction"},{"date":"2026-02-11","type":"video","partner":"Andrew Luftig","topic":"Broker Success is Our Success","platform":["LinkedIn"],"status":"planned","duration":"45s","recordingDate":"2026-02-03","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Andrew Luftig posts, then CPL reposts","pillar":"Broker Empowerment & Collaboration","brief":"Andrew explains how CPL's business model aligns with broker success rather than competing with them"},{"date":"2026-02-12","type":"firm-post","partner":null,"topic":"Valentine's Day: Love Letter to Brokers","platform":["LinkedIn"],"status":"planned","format":"text","postingChannel":"Firm Profile Only","whoToPost":"Andrew or CPL team","pillar":null,"brief":"Appreciation post celebrating CPL's broker relationships"},{"date":"2026-02-17","type":"video","partner":"Michael Carlos","topic":"Year-Round Planning Benefits","platform":["LinkedIn"],"status":"planned","duration":"45s","recordingDate":"2026-02-10","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Michael Carlos posts, then CPL reposts","pillar":"Responsive Partnership & Hands-On Service","brief":"Michael C on proactive vs reactive deal planning"},{"date":"2026-02-18","type":"video","partner":"Andrew Luftig","topic":"The CPL Partnership Model Explained","platform":["LinkedIn"],"status":"planned","duration":"55s","recordingDate":"2026-02-10","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Andrew Luftig posts, then CPL reposts","pillar":"Broker Empowerment & Collaboration","brief":"Andrew provides transparent explanation of CPL's business structure and why it benefits broker relationships"},{"date":"2026-02-19","type":"blog","partner":"Alan Perlowitz","topic":"Straightforward Guidance Case Study","platform":["Blog","Newsletter"],"status":"planned","format":"blog-post","postingChannel":"Website + Newsletter + LinkedIn Link","whoToPost":"Website admin + email + LinkedIn link post","pillar":"Responsive Partnership & Hands-On Service","brief":"Alan shares example of giving clients hard truth that saved them problems"},{"date":"2026-02-24","type":"video","partner":"Alan Perlowitz","topic":"Estate Planning Integration Example","platform":["LinkedIn"],"status":"planned","duration":"50s","recordingDate":"2026-02-17","postingChannel":"Partner Profile → Firm Reposts","whoToPost":"Alan Perlowitz posts, then CPL reposts","pillar":"Financial Expertise Integration","brief":"Real case study of integrating estate planning with commercial transaction"},{"date":"2026-02-25","type":"blog","partner":"Michael Rosenberg","topic":"Building Strong Lender Relationships: A Broker's Guide","platform":["Blog","Newsletter"],"status":"planned","format":"blog-post","postingChannel":"Website + Newsletter + LinkedIn Link","whoToPost":"Website admin + email + LinkedIn link post","pillar":"Financial Expertise Integration","brief":"Michael R's written insights on how brokers can strengthen their relationships with commercial lenders to benefit clients"}]},"stats":{"totalPosts":50,"partnerVideos":23,"partnerBlogs":10,"firmPosts":12,"partnerDistribution":{"Andrew Luftig":8,"Alan Perlowitz":5,"Alex Whiteaker":5,"Michael Carlos":5,"Michael Rosenberg":5},"pillarDistribution":{"Broker Empowerment & Collaboration":9,"Financial Expertise Integration":12,"Responsive Partnership & Hands-On Service":10,"Firm/Seasonal Posts":12}}};
;
;
// Initialize on page load
document.addEventListener('DOMContentLoaded', () => {
    initializeDashboard();
});

function initializeDashboard() {
    // Populate sections
    populateCalendar();
    populateDecisions();

    // Setup interactions
    setupMonthTabs();
    setupFilters();
}

// Deadline Countdown
function updateDeadlineCountdown() {
    const deadline = new Date(dashboardData.meta.criticalDeadline);
    const now = new Date();
    const diff = deadline - now;

    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));

    const countdownEl = document.getElementById('deadlineCountdown');
    if (countdownEl) {
        if (days > 0) {
            countdownEl.textContent = `${days} days remaining`;
        } else if (hours > 0) {
            countdownEl.textContent = `${hours} hours remaining`;
        } else {
            countdownEl.textContent = 'DEADLINE PASSED';
        }
    }
}

// Populate Calendar
function populateCalendar() {
    const container = document.getElementById('calendarContainer');
    container.innerHTML = '';

    const monthData = dashboardData.calendar[activeMonth];
    if (!monthData) return;

    // Filter by active filter
    const filteredData = activeFilter === 'all'
        ? monthData
        : monthData.filter(item => item.type === activeFilter);

    // Get the first and last day of the month - parse directly to avoid timezone issues
    const firstDateStr = filteredData[0]?.date || `2025-${activeMonth === 'december' ? '12' : activeMonth === 'january' ? '01' : '02'}-01`;
    const [year, monthNum] = firstDateStr.split('-').map(Number);
    const month = monthNum - 1; // JavaScript months are 0-indexed

    // Create calendar grid
    const calendarGrid = document.createElement('div');
    calendarGrid.className = 'calendar-grid';

    // Add day headers
    const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
    dayHeaders.forEach(day => {
        const header = document.createElement('div');
        header.className = 'calendar-day-header';
        header.textContent = day;
        calendarGrid.appendChild(header);
    });

    // Get first day of month and number of days
    const firstDayOfMonth = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();

    // Create map of dates to content
    const contentByDate = {};
    filteredData.forEach(item => {
        // Parse date manually to avoid timezone issues
        const [y, m, d] = item.date.split('-').map(Number);
        const dayNum = d;
        if (!contentByDate[dayNum]) {
            contentByDate[dayNum] = [];
        }
        contentByDate[dayNum].push(item);
    });

    // Add empty cells for days before month starts
    for (let i = 0; i < firstDayOfMonth; i++) {
        const emptyCell = document.createElement('div');
        emptyCell.className = 'calendar-day empty';
        calendarGrid.appendChild(emptyCell);
    }

    // Add days of the month
    for (let day = 1; day <= daysInMonth; day++) {
        const dayCell = document.createElement('div');
        dayCell.className = 'calendar-day';

        const dayNumber = document.createElement('div');
        dayNumber.className = 'day-number';
        dayNumber.textContent = day;
        dayCell.appendChild(dayNumber);

        // Add content for this day if exists
        if (contentByDate[day]) {
            dayCell.classList.add('has-content');

            contentByDate[day].forEach(item => {
                const contentItem = document.createElement('div');
                contentItem.className = `calendar-content-item ${item.type}`;
                contentItem.innerHTML = `
                    <div class="content-type-badge">${item.type.replace('-', ' ')}</div>
                    <div class="content-topic">${item.topic}</div>
                    ${item.pillar ? `<div class="content-pillar">${item.pillar}</div>` : ''}
                    <div class="content-meta">
                        ${item.partner ? `<div class="content-partner">${item.partner}</div>` : '<div class="content-partner">CPL Firm</div>'}
                        ${item.postingChannel ? `<div class="content-channel">${item.postingChannel}</div>` : ''}
                    </div>
                `;

                // Make clickable for details
                contentItem.addEventListener('click', (e) => {
                    e.stopPropagation();
                    showContentDetails(item);
                });

                dayCell.appendChild(contentItem);
            });
        }

        calendarGrid.appendChild(dayCell);
    }

    container.appendChild(calendarGrid);
}

// Show content details in modal/expanded view
function showContentDetails(item) {
    const modal = document.createElement('div');
    modal.className = 'content-modal';
    modal.innerHTML = `
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <h3>${item.topic}</h3>
            <div class="modal-details">
                <div class="detail-row">
                    <span class="detail-label">Date:</span>
                    <span class="detail-value">${new Date(item.date).toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' })}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Type:</span>
                    <span class="detail-value">${item.type.replace('-', ' ').toUpperCase()}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Status:</span>
                    <span class="detail-value">${item.status.replace('-', ' ').toUpperCase()}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Platform:</span>
                    <span class="detail-value">${item.platform.join(', ')}</span>
                </div>
                ${item.partner ? `
                <div class="detail-row">
                    <span class="detail-label">Partner:</span>
                    <span class="detail-value">${item.partner}</span>
                </div>
                ` : ''}
                ${item.postingChannel ? `
                <div class="detail-row">
                    <span class="detail-label">Posting Channel:</span>
                    <span class="detail-value">${item.postingChannel}</span>
                </div>
                ` : ''}
                ${item.duration ? `
                <div class="detail-row">
                    <span class="detail-label">Duration:</span>
                    <span class="detail-value">${item.duration}</span>
                </div>
                ` : ''}
                ${item.recordingDate ? `
                <div class="detail-row">
                    <span class="detail-label">Recording Date:</span>
                    <span class="detail-value">${new Date(item.recordingDate).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}</span>
                </div>
                ` : ''}
                ${item.format ? `
                <div class="detail-row">
                    <span class="detail-label">Format:</span>
                    <span class="detail-value">${item.format.replace('-', ' ').toUpperCase()}</span>
                </div>
                ` : ''}
                ${item.whoToPost ? `
                <div class="detail-row">
                    <span class="detail-label">Who Posts:</span>
                    <span class="detail-value">${item.whoToPost}</span>
                </div>
                ` : ''}
                ${item.pillar ? `
                <div class="detail-row">
                    <span class="detail-label">Content Pillar:</span>
                    <span class="detail-value" style="font-weight: 600; color: var(--color-primary);">${item.pillar}</span>
                </div>
                ` : ''}
                ${item.brief ? `
                <div class="detail-row" style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--color-border);">
                    <span class="detail-label">Brief:</span>
                    <span class="detail-value" style="font-style: italic;">${item.brief}</span>
                </div>
                ` : ''}
            </div>
        </div>
    `;

    document.body.appendChild(modal);

    // Close modal handlers
    modal.querySelector('.modal-close').addEventListener('click', () => modal.remove());
    modal.querySelector('.modal-overlay').addEventListener('click', () => modal.remove());
}

// Populate Decisions
function populateDecisions() {
    const container = document.getElementById('decisionsGrid');
    container.innerHTML = '';

    dashboardData.decisions.forEach(decision => {
        const card = document.createElement('div');
        card.className = 'decision-card';

        card.innerHTML = `
            <div class="decision-header">
                <div class="decision-number">Decision #${decision.id}</div>
                <div class="decision-status">${decision.status.toUpperCase()}</div>
            </div>
            <h3 class="decision-title">${decision.title}</h3>
            <p class="decision-description">${decision.description}</p>
            <div class="decision-meta">
                <div class="decision-budget">${decision.budgetImpact}</div>
                <div class="decision-approvers">${decision.approver.join(', ')}</div>
            </div>
        `;

        container.appendChild(card);
    });
}

// Setup Month Tabs
function setupMonthTabs() {
    document.querySelectorAll('.month-tab').forEach(tab => {
        tab.addEventListener('click', () => {
            // Update active tab
            document.querySelectorAll('.month-tab').forEach(t => t.classList.remove('active'));
            tab.classList.add('active');

            // Update active month
            activeMonth = tab.dataset.month;

            // Repopulate calendar
            populateCalendar();
        });
    });
}

// Setup Filters
function setupFilters() {
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            // Update active filter
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            // Update active filter
            activeFilter = btn.dataset.filter;

            // Repopulate calendar
            populateCalendar();
        });
    });
}

// Update last updated date
const lastUpdatedEl = document.getElementById('lastUpdated');
if (lastUpdatedEl) {
    lastUpdatedEl.textContent = dashboardData.meta.lastUpdated;
}
